(function(d,p){typeof exports=="object"&&typeof module<"u"?p(exports):typeof define=="function"&&define.amd?define(["exports"],p):(d=typeof globalThis<"u"?globalThis:d||self,p(d.CUSDIS_COUNT={}))})(this,function(d){"use strict";const p=function m(f){function l(t,n,i){var o,a={};if(Array.isArray(t))return t.concat(n);for(o in t)a[i?o.toLowerCase():o]=t[o];for(o in n){var e=i?o.toLowerCase():o,u=n[o];a[e]=e in a&&typeof u=="object"?l(a[e],u,e==="headers"):u}return a}function r(t,n,i,o){typeof t!="string"&&(t=(n=t).url);var a={config:n},e=l(f,n),u={},s=o||e.data;(e.transformRequest||[]).map(function(c){s=c(s,e.headers)||s}),s&&typeof s=="object"&&typeof s.append!="function"&&(s=JSON.stringify(s),u["content-type"]="application/json");var g=typeof document<"u"&&document.cookie.match(RegExp("(^|; )"+e.xsrfCookieName+"=([^;]*)"));if(g&&(u[e.xsrfHeaderName]=g[2]),e.auth&&(u.authorization=e.auth),e.baseURL&&(t=t.replace(/^(?!.*\/\/)\/?(.*)$/,e.baseURL+"/$1")),e.params){var b=~t.indexOf("?")?"&":"?";t+=b+(e.paramsSerializer?e.paramsSerializer(e.params):new URLSearchParams(e.params))}return(e.fetch||fetch)(t,{method:i||e.method,body:s,headers:l(e.headers,u,!0),credentials:e.withCredentials?"include":"same-origin"}).then(function(c){for(var h in c)typeof c[h]!="function"&&(a[h]=c[h]);var v=e.validateStatus?e.validateStatus(c.status):c.ok;return e.responseType=="stream"?(a.data=c.body,a):c[e.responseType||"text"]().then(function(S){a.data=S,a.data=JSON.parse(S)}).catch(Object).then(function(){return v?a:Promise.reject(a)})})}return f=f||{},r.request=r,r.get=function(t,n){return r(t,n,"get")},r.delete=function(t,n){return r(t,n,"delete")},r.head=function(t,n){return r(t,n,"head")},r.options=function(t,n){return r(t,n,"options")},r.post=function(t,n,i){return r(t,i,"post",n)},r.put=function(t,n,i){return r(t,i,"put",n)},r.patch=function(t,n,i){return r(t,i,"patch",n)},r.all=Promise.all.bind(Promise),r.spread=function(t){return function(n){return t.apply(this,n)}},r.CancelToken=typeof AbortController=="function"?AbortController:Object,r.defaults=f,r.create=m,r}();async function y(){const m=document.currentScript||document.querySelector("#for-testing"),{appId:f,host:l}=m.dataset,r=l||"https://cusdis.com",t=document.querySelectorAll("*[data-cusdis-count-page-id]"),n=Array.from(t).map(o=>o.dataset.cusdisCountPageId),i=await p.get(`${r}/api/open/project/${f}/comments/count`,{params:{pageIds:n}});Array.from(t).forEach(o=>{o.innerHTML=i.data.data[o.dataset.cusdisCountPageId]})}y(),d.initial=y,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
